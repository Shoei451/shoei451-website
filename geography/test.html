<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>テスト</title>
</head>
<body>
<h1>Supabase接続テスト</h1>
<button onclick="testConnection()">テスト実行</button>
<pre id="result"></pre>

<script src="../js/supabase.js"></script>
<script>
const SUPABASE_URL = 'https://gjuqsyaugrsshmjerhme.supabase.co';
const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdqdXFzeWF1Z3Jzc2htamVyaG1lIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjY0NzA3NTYsImV4cCI6MjA4MjA0Njc1Nn0.V8q5ddz5tPy7wBaQ73aGtmCZyqzA6pPciPRwRIZjJcs';
const client = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

async function testConnection() {
    const result = document.getElementById('result');
    result.textContent = 'テスト中...';
    
    try {
        const { data, error } = await client
            .storage
            .from('exam-papers')
            .list('home-economics/2024-term1');
        
        result.textContent = JSON.stringify({
            success: !error,
            files: data,
            error: error
        }, null, 2);
    } catch (e) {
        result.textContent = 'エラー: ' + e.message;
    }
}
</script>
</body>
</html>
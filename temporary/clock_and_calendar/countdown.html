<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>the Countdown for the exams</title>
  <link rel="icon" type="image/png" href="../images/countdown.png">

  <style>
    :root {
      --bg-day: linear-gradient(135deg, #89f7fe, #66a6ff);
      --bg-night: linear-gradient(135deg, #1e3c72, #2a5298);
      --bar-color: #00ffcc;
    }

    body {
      font-family: "Segoe UI", "Hiragino Kaku Gothic ProN", Meiryo, sans-serif;
      text-align: center;
      min-height: 100vh;
      margin: 0;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      background: var(--bg-day);
      color: #fff;
      transition: background 2s;
    }

    h1 {
      font-size: 1.8em;
      margin: 10px 0;
    }

    #today {
      font-size: 1em;
      margin-bottom: 25px;
      opacity: 0.9;
      background: rgba(255, 255, 255, 0.1);
      padding: 8px 16px;
      border-radius: 10px;
    }

    .count-box {
      font-size: 1.5em;
      font-weight: bold;
      margin-bottom: 20px;
      background: rgba(255, 255, 255, 0.1);
      padding: 15px 25px;
      border-radius: 15px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
    }

    #progress-container {
      width: 80%;
      max-width: 500px;
      height: 20px;
      background: rgba(255, 255, 255, 0.2);
      border-radius: 10px;
      overflow: hidden;
      margin: 10px 0;
    }

    #progress-bar {
      height: 100%;
      width: 0%;
      background: var(--bar-color);
      border-radius: 10px;
      transition: width 1s ease;
    }

    #progress-text {
      margin-top: 8px;
      font-size: 1.1em;
    }

    #quote {
      font-size: 1.1em;
      font-style: italic;
      opacity: 0.9;
      margin-top: 25px;
    }

    #lang-btn {
      position: fixed;
      top: 15px;
      right: 15px;
      background: rgba(255,255,255,0.2);
      border: none;
      color: #fff;
      padding: 8px 12px;
      border-radius: 10px;
      cursor: pointer;
      font-size: 0.9em;
      backdrop-filter: blur(3px);
    }

    @media (max-width: 600px) {
      h1 { font-size: 1.3em; }
      .count-box { font-size: 1.1em; padding: 10px 20px; }
      #today { font-size: 0.9em; }
    }
  </style>
</head>
<body>
  <button id="lang-btn">EN</button>

  <h1 id="main-title">大学入試共通テストまであと</h1>
  <div id="today"></div>
  <div id="count-kyotsu" class="count-box"></div>

  <h1 id="sub-title">東大入試まであと</h1>
  <div id="count-todai" class="count-box"></div>

  <div id="progress-container">
    <div id="progress-bar"></div>
  </div>
  <div id="progress-text"></div>

  <div id="quote"></div>

  <script>
    const examKyotsu = new Date(2027, 0, 16, 0, 0, 0);
    const examTodai = new Date(2027, 1, 25, 0, 0, 0);
    const resultDate = new Date(2027, 2, 10, 12, 0, 0);
    const startDate = new Date(2024, 0, 7, 0, 0, 0);

    let lang = "ja";

    const quotes = {
      ja: [
        "努力は裏切らない。ただし、サボれば確実に裏切る。",
        "今日の1時間が、未来の1点を作る。",
        "できるかできないかじゃない。やるかやらないかだ。",
        "自分を信じる。それが一番の武器になる。",
        "焦らず、でも止まらず。"
      ],
      en: [
        "Effort never betrays you—unless you stop trying.",
        "One hour today builds one point tomorrow.",
        "It's not about can or can't. It's about will or won't.",
        "Believe in yourself—that's your strongest weapon.",
        "Don't rush, but don't stop."
      ]
    };

    function formatCountdown(targetDate) {
      const now = new Date();
      const diff = targetDate - now;
      if (diff <= 0) return lang === "ja" ? "当日です！" : "It's the day!";

      const totalSeconds = Math.floor(diff / 1000);
      const days = Math.floor(totalSeconds / (3600 * 24));
      const hours = Math.floor((totalSeconds % (3600 * 24)) / 3600);
      const minutes = Math.floor((totalSeconds % 3600) / 60);
      const seconds = totalSeconds % 60;

      return lang === "ja"
        ? `${days}日 ${hours}時間 ${minutes}分 ${seconds}秒`
        : `${days}d ${hours}h ${minutes}m ${seconds}s`;
    }

    function updateCountdowns() {
      const now = new Date();
      const hour = now.getHours();
      document.body.style.background =
        (hour >= 6 && hour < 18) ? "var(--bg-day)" : "var(--bg-night)";

      // Countdown
      document.getElementById("count-kyotsu").textContent = formatCountdown(examKyotsu);
      document.getElementById("count-todai").textContent = formatCountdown(examTodai);

      // Today info
      const weekdays = lang === "ja"
        ? ["日", "月", "火", "水", "木", "金", "土"]
        : ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"];
      const y = now.getFullYear();
      const m = now.getMonth() + 1;
      const d = now.getDate();
      const day = weekdays[now.getDay()];
      const hh = String(now.getHours()).padStart(2, "0");
      const mm = String(now.getMinutes()).padStart(2, "0");
      const ss = String(now.getSeconds()).padStart(2, "0");

      document.getElementById("today").textContent =
        lang === "ja"
          ? `今日は ${y}年${m}月${d}日(${day}) ${hh}:${mm}:${ss}`
          : `Today: ${y}-${m}-${d} (${day}) ${hh}:${mm}:${ss}`;

      // Progress bar
      const total = examKyotsu - startDate;
      const elapsed = now - startDate;
      const percent = Math.min(100, Math.max(0, (elapsed / total) * 100));
      document.getElementById("progress-bar").style.width = percent + "%";
      document.getElementById("progress-text").textContent =
        lang === "ja" ? `進捗：${percent.toFixed(2)}%` : `Progress: ${percent.toFixed(2)}%`;
    }

    function updateQuote() {
      const arr = quotes[lang];
      const random = Math.floor(Math.random() * arr.length);
      document.getElementById("quote").textContent = arr[random];
    }

    // Language switch
    document.getElementById("lang-btn").addEventListener("click", () => {
      lang = lang === "ja" ? "en" : "ja";
      document.getElementById("lang-btn").textContent = lang === "ja" ? "EN" : "日本語";
      document.getElementById("main-title").textContent =
        lang === "ja" ? "大学入試共通テストまであと" : "Until the Kyotsu Test";
      document.getElementById("sub-title").textContent =
        lang === "ja" ? "東大入試まであと" : "Until the University of Tokyo Exam";
      updateQuote();
    });

    setInterval(updateCountdowns, 1000);
    updateCountdowns();
    updateQuote();
  </script>
</body>
</html>

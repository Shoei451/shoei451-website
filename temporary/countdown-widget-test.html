<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Countdown Widget Test</title>
<link rel="stylesheet" href="css/common.css">
<style>
/* Countdown Card Specific Styles */
.countdown-card {
    background: linear-gradient(135deg, #313A49 0%, #FABA40 100%);
    border-radius: 20px;
    padding: 30px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
    color: #ffffff;
    position: relative;
    overflow: hidden;
    grid-column: 1 / -1; /* Span full width */
}

.countdown-card::before {
    content: '';
    position: absolute;
    top: -50%;
    right: -50%;
    width: 200%;
    height: 200%;
    background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
    animation: pulse 15s ease-in-out infinite;
}

.countdown-content {
    position: relative;
    z-index: 1;
}

.countdown-card h3 {
    margin: 0 0 20px;
    font-size: 1.8rem;
    color: #ffffff;
    text-align: center;
}

.countdown-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 20px;
    margin-bottom: 20px;
}

.exam-countdown {
    background: rgba(255, 255, 255, 0.15);
    backdrop-filter: blur(10px);
    border-radius: 15px;
    padding: 20px;
    text-align: center;
    border: 2px solid rgba(255, 255, 255, 0.2);
}

.exam-countdown h4 {
    margin: 0 0 10px;
    font-size: 1.1rem;
    color: #ffffff;
    opacity: 0.9;
}

.countdown-time {
    font-size: 1.5rem;
    font-weight: 700;
    color: #ffffff;
    text-shadow: 0 2px 4px rgba(0,0,0,0.3);
}

.progress-section {
    background: rgba(255, 255, 255, 0.15);
    backdrop-filter: blur(10px);
    border-radius: 15px;
    padding: 20px;
    border: 2px solid rgba(255, 255, 255, 0.2);
}

.progress-label {
    display: flex;
    justify-content: space-between;
    margin-bottom: 10px;
    font-size: 0.9rem;
    color: #ffffff;
    opacity: 0.9;
}

.progress-bar-container {
    width: 100%;
    height: 12px;
    background: rgba(255, 255, 255, 0.2);
    border-radius: 6px;
    overflow: hidden;
}

.progress-bar {
    height: 100%;
    background: #ffffff;
    border-radius: 6px;
    transition: width 1s ease;
    box-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
}

.quote-section {
    text-align: center;
    margin-top: 20px;
    font-style: italic;
    color: #ffffff;
    opacity: 0.9;
    font-size: 1rem;
}

.today-info {
    text-align: center;
    margin-top: 15px;
    font-size: 0.9rem;
    color: #ffffff;
    opacity: 0.8;
}

@media (max-width: 768px) {
    .countdown-card h3 {
        font-size: 1.5rem;
    }
    
    .countdown-grid {
        grid-template-columns: 1fr;
        gap: 15px;
    }
    
    .countdown-time {
        font-size: 1.2rem;
    }
}
</style>
</head>
<body>

<!-- Theme Toggle -->
<span class="logo-switches">
    <button id="theme-toggle" title="Toggle Theme">
        <svg id="moon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
        </svg>
        <svg id="sun" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="5"></circle>
            <line x1="12" y1="1" x2="12" y2="3"></line>
            <line x1="12" y1="21" x2="12" y2="23"></line>
            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
            <line x1="1" y1="12" x2="3" y2="12"></line>
            <line x1="21" y1="12" x2="23" y2="12"></line>
            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
        </svg>
    </button>
</span>

<header>
    <h1>Countdown Widget Test</h1>
    <p>Testing the countdown integration</p>
</header>

<!-- Countdown Widget -->
<section class="cards-container" style="max-width: 1200px; margin: 40px auto; padding: 0 20px;">
    <div class="countdown-card">
        <div class="countdown-content">
            <h3>â³ å…¥è©¦ã¾ã§ã®ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³</h3>
            
            <div class="countdown-grid">
                <div class="exam-countdown">
                    <h4>ğŸ“ å¤§å­¦å…¥è©¦å…±é€šãƒ†ã‚¹ãƒˆ</h4>
                    <div class="countdown-time" id="count-kyotsu">è¨ˆç®—ä¸­...</div>
                </div>
                
                <div class="exam-countdown">
                    <h4>ğŸ“ æ±å¤§å…¥è©¦</h4>
                    <div class="countdown-time" id="count-todai">è¨ˆç®—ä¸­...</div>
                </div>
            </div>
            
            <div class="progress-section">
                <div class="progress-label">
                    <span>é–‹å§‹æ—¥ã‹ã‚‰ã®é€²æ—</span>
                    <span id="progress-text">0%</span>
                </div>
                <div class="progress-bar-container">
                    <div class="progress-bar" id="progress-bar"></div>
                </div>
            </div>
            
            <div class="quote-section" id="quote">
                åŠªåŠ›ã¯è£åˆ‡ã‚‰ãªã„ã€‚ãŸã ã—ã€ã‚µãƒœã‚Œã°ç¢ºå®Ÿã«è£åˆ‡ã‚‹ã€‚
            </div>
            
            <div class="today-info" id="today"></div>
        </div>
    </div>
</section>

<footer>
    <p>Get in touch: <a href="mailto:okamotoshoei451@gmail.com">okamotoshoei451@gmail.com</a></p>
</footer>

<script>
// Exam dates
const examKyotsu = new Date(2027, 0, 16, 0, 0, 0);
const examTodai = new Date(2027, 1, 25, 0, 0, 0);
const startDate = new Date(2024, 0, 7, 0, 0, 0);

// Quotes
const quotes = [
    "åŠªåŠ›ã¯è£åˆ‡ã‚‰ãªã„ã€‚ãŸã ã—ã€ã‚µãƒœã‚Œã°ç¢ºå®Ÿã«è£åˆ‡ã‚‹ã€‚",
    "ä»Šæ—¥ã®1æ™‚é–“ãŒã€æœªæ¥ã®1ç‚¹ã‚’ä½œã‚‹ã€‚",
    "ã§ãã‚‹ã‹ã§ããªã„ã‹ã˜ã‚ƒãªã„ã€‚ã‚„ã‚‹ã‹ã‚„ã‚‰ãªã„ã‹ã ã€‚",
    "è‡ªåˆ†ã‚’ä¿¡ã˜ã‚‹ã€‚ãã‚ŒãŒä¸€ç•ªã®æ­¦å™¨ã«ãªã‚‹ã€‚",
    "ç„¦ã‚‰ãšã€ã§ã‚‚æ­¢ã¾ã‚‰ãšã€‚"
];

function formatCountdown(targetDate) {
    const now = new Date();
    const diff = targetDate - now;
    
    if (diff <= 0) return "å½“æ—¥ã§ã™ï¼";
    
    const totalSeconds = Math.floor(diff / 1000);
    const days = Math.floor(totalSeconds / (3600 * 24));
    const hours = Math.floor((totalSeconds % (3600 * 24)) / 3600);
    const minutes = Math.floor((totalSeconds % 3600) / 60);
    const seconds = totalSeconds % 60;
    
    return `${days}æ—¥ ${hours}æ™‚é–“ ${minutes}åˆ† ${seconds}ç§’`;
}

function updateCountdowns() {
    const now = new Date();
    
    // Update countdowns
    document.getElementById("count-kyotsu").textContent = formatCountdown(examKyotsu);
    document.getElementById("count-todai").textContent = formatCountdown(examTodai);
    
    // Update today info
    const weekdays = ["æ—¥", "æœˆ", "ç«", "æ°´", "æœ¨", "é‡‘", "åœŸ"];
    const y = now.getFullYear();
    const m = now.getMonth() + 1;
    const d = now.getDate();
    const day = weekdays[now.getDay()];
    const hh = String(now.getHours()).padStart(2, "0");
    const mm = String(now.getMinutes()).padStart(2, "0");
    const ss = String(now.getSeconds()).padStart(2, "0");
    
    document.getElementById("today").textContent = 
        `ä»Šæ—¥ã¯ ${y}å¹´${m}æœˆ${d}æ—¥(${day}) ${hh}:${mm}:${ss}`;
    
    // Update progress bar
    const total = examKyotsu - startDate;
    const elapsed = now - startDate;
    const percent = Math.min(100, Math.max(0, (elapsed / total) * 100));
    document.getElementById("progress-bar").style.width = percent + "%";
    document.getElementById("progress-text").textContent = `${percent.toFixed(2)}%`;
}

function updateQuote() {
    const random = Math.floor(Math.random() * quotes.length);
    document.getElementById("quote").textContent = quotes[random];
}

// Theme toggle
if (localStorage.getItem("pref-theme") === "dark") {
    document.body.classList.add('dark');
} else if (localStorage.getItem("pref-theme") === "light") {
    document.body.classList.remove('dark');
} else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
    document.body.classList.add('dark');
}

const themeToggle = document.getElementById('theme-toggle');
themeToggle.addEventListener('click', () => {
    document.body.classList.toggle('dark');
    if (document.body.classList.contains('dark')) {
        localStorage.setItem('pref-theme', 'dark');
    } else {
        localStorage.setItem('pref-theme', 'light');
    }
});

// Initialize
setInterval(updateCountdowns, 1000);
updateCountdowns();
updateQuote();

// Update quote every 10 seconds
setInterval(updateQuote, 10000);
</script>

</body>
</html>
